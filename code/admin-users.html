<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>مسؤول النظام – بيانات المستخدمين</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    @font-face { font-family: 'GE Dinar'; src: url('./fonts/GE-Dinar-One-Medium.otf') format('opentype'); }
    * { box-sizing:border-box; margin:0; padding:0; }
    body { font-family:'GE Dinar',sans-serif; background:#f5f7fa; color:#333; display:flex; flex-direction:column; min-height:100vh; }
    .container { width:90%; max-width:1200px; margin: auto; }

    /* Header */
    header { background:#0084bd; color:#fff; padding:15px 0; position:relative; }
    header .container { display:flex; align-items:center; justify-content:space-between; }
    header img { height:60px; }
    .menu-btn { background:transparent; border:none; display:flex; flex-direction:column; cursor:pointer; }
    .menu-btn .bar { width:25px; height:3px; background:#fff; margin:3px 0; }
    .dropdown-menu { display:none; position:absolute; top:100%; right:20px; background:#fff; border:1px solid #ddd; border-radius:5px; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
    .dropdown-menu a { display:block; padding:10px; color:#333; text-decoration:none; border-bottom:1px solid #eee; }
    .dropdown-menu a:last-child { border-bottom:none; }
    .dropdown-menu a:hover { background:#f0f8ff; }

    /* Greetings */
    .section { padding:30px 0; flex-grow:1; }
    .greeting { text-align:right; font-size:1.6rem; margin-bottom:5px; }
    .instructions { text-align:right; font-size:1rem; margin-bottom:25px; color:#555; }

    /* KPI Cards */
    .kpi-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-bottom:40px; }
    .kpi-card { background:#fff; border-radius:10px; padding:20px; text-align:center; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
    .kpi-icon { width:40px; margin-bottom:10px; }
    .kpi-number { font-size:2rem; font-weight:bold; }
    .kpi-label { color:#666; }

    /* Charts */
    .charts { display:grid; grid-template-columns:repeat(auto-fit,minmax(360px,1fr)); gap:30px; margin-bottom:40px; }
    .chart-section { background:#fff; border-radius:10px; padding:20px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
    .chart-section h3 { text-align:center; margin-bottom:10px; }
    .chart-section canvas { max-height:300px; }

    /* Activity Feed */
    .feed { background:#fff; border-radius:10px; padding:20px; box-shadow:0 4px 15px rgba(0,0,0,0.1); margin-bottom:40px; }
    .feed h3 { margin-bottom:15px; text-align:center; }
    .feed ul { list-style:none; }
    .feed li { padding:10px; border-bottom:1px solid #eee; }
    .feed li:last-child { border-bottom:none; }
    .feed time { display:block; font-size:0.85rem; color:#888; margin-top:5px; }

    /* Footer */
    footer { background:#0084bd; color:#fff; text-align:center; padding:15px 0; }
  </style>
</head>
<body>

  <header>
    <div class="container">
      <button class="menu-btn" id="menu-toggle">
        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      </button>
      <img src="images/Takamoul_Logo.png" alt="Logo">
      <nav id="admin-menu" class="dropdown-menu">
        <a href="admin-users.html">بيانات المستخدمين</a>
        <a href="admin-roles.html">إدارة الصلاحيات</a>
        <a href="admin-orcid.html">تكامل ORCID</a>
        <a href="admin-systems.html">حالة الأنظمة</a>
        <a href="admin-reports.html">التقارير العامة</a>
        <a href="admin-events.html">إدارة الفعاليات</a>
        <a href="admin-support.html">الدعم الفني</a>
        <a href="admin-alerts.html">إدارة التنبيهات</a>
        <a href="admin-data.html">استيراد/تصدير البيانات</a>
      </nav>
    </div>
  </header>

  <section class="section container">
    <div class="greeting">أهلاً فيصل!</div>
    <div class="instructions">
      هنا تستطيع عرض وتحليل بيانات المستخدمين: نظرة عامة، نشاط اليوم، ونمو التسجيلات داخل النظام.
    </div>

<!-- KPI cards -->
<div class="kpi-grid">
  <div class="kpi-card">
    <div class="kpi-number">120</div>
    <div class="kpi-label">إجمالي المستخدمين</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-number">45</div>
    <div class="kpi-label">نشطون اليوم</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-number">12%</div>
    <div class="kpi-label">معدل النمو الشهري</div>
  </div>
</div>
    <!-- Charts -->
    <div class="charts">
      <div class="chart-section">
        <h3>توزيع المستخدمين حسب الفئة</h3>
        <canvas id="userDistributionChart"></canvas>
      </div>
      <div class="chart-section">
        <h3>المستخدمون الجدد</h3>
        <canvas id="newUsersChart"></canvas>
      </div>
      <div class="chart-section">
        <h3>التسجيل اليومي خلال الأسبوع الماضي</h3>
        <canvas id="dailySignupsChart"></canvas>
      </div>
    </div>

    <!-- Activity Feed -->
    <div class="feed">
      <h3>آخر التسجيلات</h3>
      <ul>
        <li>
          تم تسجيل الطالب “سارة آل ناصر”
          <time datetime="2025-04-25T10:15">25 أبريل 2025، 10:15</time>
        </li>
        <li>
          تم تسجيل الموظف “خالد العتيبي”
          <time datetime="2025-04-24T14:30">24 أبريل 2025، 14:30</time>
        </li>
        <li>
          تم تسجيل د. نورة الزهراني
          <time datetime="2025-04-23T09:45">23 أبريل 2025، 09:45</time>
        </li>
      </ul>
    </div>
  </section>

  <footer>&copy; 2025 جامعة الملك سعود – كل الحقوق محفوظة</footer>

  <script>
    // Menu toggle
    document.getElementById('menu-toggle').addEventListener('click', e => {
      e.stopPropagation();
      const menu = document.getElementById('admin-menu');
      menu.style.display = menu.style.display==='block'?'none':'block';
    });
    window.addEventListener('click', ()=> {
      document.getElementById('admin-menu').style.display = 'none';
    });

    // Charts
    new Chart(document.getElementById('userDistributionChart'), {
      type: 'pie',
      data: {
        labels: ['أعضاء هيئة التدريس','طلاب','الموظفون الإداريون'],
        datasets:[{ data:[30,70,20], backgroundColor:['#4e79a7','#f28e2b','#e15759'] }]
      },
      options:{ responsive:true, plugins:{legend:{position:'bottom'}} }
    });

    new Chart(document.getElementById('newUsersChart'), {
      type:'bar',
      data:{
        labels:['هذا الأسبوع','هذا الشهر'],
        datasets:[{ label:'جدد', data:[5,15], backgroundColor:['#76b7b2','#59a14f'] }]
      },
      options:{ responsive:true, scales:{y:{beginAtZero:true,ticks:{stepSize:5}}}, plugins:{legend:{display:false}} }
    });

    new Chart(document.getElementById('dailySignupsChart'), {
      type:'line',
      data:{
        labels:['19 أبريل','20 أبريل','21 أبريل','22 أبريل','23 أبريل','24 أبريل','25 أبريل'],
        datasets:[{ label:'تسجيلات يومية', data:[2,4,3,5,6,7,5], fill:false, tension:0.4 }]
      },
      options:{ responsive:true, scales:{y:{beginAtZero:true,ticks:{stepSize:1}}} }
    });
  </script>
</body>
</html>
